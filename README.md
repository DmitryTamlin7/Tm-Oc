# ü¶Ä Tm_Os: Rust Microkernel OS

![Rust](https://img.shields.io/badge/language-Rust-orange.svg?style=for-the-badge&logo=rust)
![Platform](https://img.shields.io/badge/platform-x86__64-blue.svg?style=for-the-badge)
![Status](https://img.shields.io/badge/status-active-success.svg?style=for-the-badge)
![License](https://img.shields.io/badge/license-MIT-yellow.svg?style=for-the-badge)

**Tm_Os** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —É—á–µ–±–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ —è–∑—ã–∫–µ Rust –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã x86_64. –ü—Ä–æ–µ–∫—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —è–¥—Ä–∞ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (no_std).

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (Core Features)

* **Memory Safety**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–π Rust –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ C-—è–¥–µ—Ä (dangling pointers, race conditions).
* **VGA Driver**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ü–≤–µ—Ç–æ–≤.
* **Interrupt Handling**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (Page Faults, Double Faults) –∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π.
* **Advanced Paging**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è 4-—É—Ä–æ–≤–Ω–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Ç–∞–±–ª–∏—Ü —Å—Ç—Ä–∞–Ω–∏—Ü.
* **Heap Management**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–ª–ª–æ–∫–∞—Ç–æ—Ä –∫—É—á–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Vec`, `Box`, `String` –∏ `Rc`.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:

| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª |
| :--- | :--- |
| `vga_buffer` | –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å—é –∏ –º–∞–∫—Ä–æ—Å—ã `print!`/`println!`. |
| `gdt` | –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –∏ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è (TSS). |
| `interrupts` | –¢–∞–±–ª–∏—Ü–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (IDT) –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. |
| `memory` | –§–∏–∑–∏—á–µ—Å–∫–∏–π –∞–ª–ª–æ–∫–∞—Ç–æ—Ä —Ñ—Ä–µ–π–º–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞–ø–ø–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü. |
| `allocator` | –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∞–ª–ª–æ–∫–∞—Ç–æ—Ä –ø–∞–º—è—Ç–∏ (Linked List Allocator). |

---

## üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–ª–æ–∂–Ω—É—é —Å—Ö–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é:
1. **Physical Level**: `BootInfoFrameAllocator` —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç—É –ø–∞–º—è—Ç–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º.
2. **Virtual Level**: `OffsetPageTable` —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Ñ—Ä–µ–π–º–∞–º–∏.
3. **Heap Level**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫—É—á–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, –ø–æ–∑–≤–æ–ª—è—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Rust.



---

## üñ• –ö–æ–º–∞–Ω–¥–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ (Shell)
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–≤–æ–¥. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–≤–æ–¥–∞:

**Hardware:** –ù–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ IRQ 1.

**Kernel:** –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–∫–∞–Ω-–∫–æ–¥ –∏–∑ –ø–æ—Ä—Ç–∞ 0x60.

**Shell:** –°–∫–∞–Ω-–∫–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å–∏–º–≤–æ–ª –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä–µ String.

**Execute:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter —Å—Ç—Ä–æ–∫–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞.

–ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏:

Plaintext
```bash
> help
Available commands: help, clear, sum, uptime
> sum 100
Sum from 1 to 100 is: 5050
> clear
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Rust nightly –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
```bash
rustup override set nightly
rustup component add rust-src llvm-tools-preview
cargo install bootimage

```

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–Ø–¥—Ä–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞ QEMU:

```bash
cargo run

```

---

## üìà –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (Roadmap)

* [x] **Phase 0-2:** VGA –≤—ã–≤–æ–¥, GDT, –æ–±—Ä–∞–±–æ—Ç–∫–∞ Double Fault.
* [x] **Phase 3:** Interrupt Descriptor Table (IDT) –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
* [x] **Phase 4-5:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Paging –∏ –∞–ª–ª–æ–∫–∞—Ç–æ—Ä–∞ —Ñ—Ä–µ–π–º–æ–≤.
* [x] **Phase 6:** Heap Allocator & Standard Collections (`alloc`) 
* [x] **Phase 7:** Multitasking (Cooperative/Preemptive).
* [x] **Phase 8:** Keyboard Input Driver.
* [ ] **Phase 9:** Multitasking (Async/Await & Executor).
*[ ] **Phase 10:** Simple Filesystem (Read-only).

---



---

<p align="center">
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å —Ü–µ–ª—å—é –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. ü¶Ä
</p>

